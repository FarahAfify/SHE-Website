(self.modernJsonp=self.modernJsonp||[]).push([["84536"],{576140:function(e,t,a){a.d(t,{q:()=>_});var n=a(667294),r=a(581722),s=a(312048),l=a(400267),i=a(821342),o=a(378888),d=a(469817),u=a(76086),c=a(261228);let _=()=>{let e=(0,s.TH)(),t=(0,i.Z)(),a=(0,r.I0)(),{getNuxSignals:_,selectedUseCases:m,selectedPins:g,shouldUseNewReducerState:p}=(0,u.u)(),E=p?_():(0,d.rQ)(m,g);return(0,n.useCallback)(()=>{let n=t.isAuth&&t.firstHomeFeedRequestAfterNux,r=(0,l.Z)({viewerIsPartner:t.isAuth&&t.isPartner,inNux:(n&&a((0,c.H5)(!1)),n),staticFeed:!!(e&&(e.pathname.includes("pwt_performance_testing")||void 0!==(0,o.mB)(e.search).pwt_performance_testing)),inNewsHub:e?.pathname.includes("news_hub")??!1});return{name:"UserHomefeedResource",options:E.length>0?{...r,nux_signals_map:E}:r}},[a,t,e,E])}},400267:function(e,t,a){a.d(t,{Z:()=>n});let n=({inNux:e,inNewsHub:t,staticFeed:a,viewerIsPartner:n})=>({field_set_key:n?"hf_grid_partner":"hf_grid",in_nux:e,in_news_hub:t,static_feed:a})},937805:function(e,t,a){a.d(t,{Z:()=>l});var n=a(675973),r=a(15667),s=a(647709);function l(){let{isAuthenticated:e}=(0,r.B)(),t=(0,s.ml)(),{checkExperiment:a}=(0,n.Z)();return{mWebCloseupRedesignEnabled:e&&t&&a("mweb_closeup_redesign").anyEnabled,mWebCloseupRedesignExpGroup:a("mweb_closeup_redesign").group}}},449029:function(e,t,a){a.d(t,{_:()=>i,p:()=>o});var n=a(667294),r=a(729434),s=a(785893);let{Provider:l,get:i}=(0,r.Z)("VisualShopContext");function o({children:e}){let[t,a]=(0,n.useState)({}),[r,i]=(0,n.useState)({}),o=(0,n.useRef)(0),d=(0,n.useRef)("");return(0,s.jsx)(l,{value:{cachedOneBarModules:t,setCachedOneBarModules:a,cachedDescriptorModules:r,setCachedDescriptorModules:i,imageContainerScrollTop:o,imageContainerScrollTopForPinId:d},children:e})}},55543:function(e,t,a){a.d(t,{Z:()=>r});var n=a(603316);function r(e,t){return new Promise((a,r)=>{if(document.querySelector(`script[src="${e}"]`)){let e=0;if("FACEBOOK"===t)if(window.FB)a();else{let t=setInterval(()=>{window.FB||20===e?(clearInterval(t),a()):(e+=1,(0,n.nP)(`mweb.loadScript.facebook.tries_${e}`,{sampleRate:.01}))},100)}else if("GSI"===t)if(window.google)a();else{let t=setInterval(()=>{window.google||20===e?(clearInterval(t),a()):(e+=1,(0,n.nP)(`mweb.loadScript.gsi.tries_${e}`,{sampleRate:.01}))},100)}else a()}else{let t=document.createElement("script");t.src=e,t.async=!0,t.addEventListener("load",()=>a()),t.addEventListener("error",r),document.getElementsByTagName("head")[0].appendChild(t)}})}},453179:function(e,t,a){a.d(t,{Mt:()=>T,NK:()=>E,P6:()=>s,UE:()=>h,ZE:()=>g,Zt:()=>p,_J:()=>d,_S:()=>f,cL:()=>_,iR:()=>y,jL:()=>o,oN:()=>r,oU:()=>A,rM:()=>m,sV:()=>u,sY:()=>c,yp:()=>l});var n=a(239728);let r=5e3,s=5e3/n.gJ,l="Pin page",i=["Uploaded by user"],o=(e,t)=>!!t&&!e,d=e=>!!e&&5!==e,u=e=>["email","messages","deep_linking"].includes(e),c=e=>!!e&&"gif"===e,_=({embedSrc:e,embedSubtype:t,embedType:a})=>!!e&&!c(a)&&"pinstory"!==t,m=({link:e,mobileLink:t,trackedLink:a,utmLink:n})=>!t&&!n&&!a&&!e,g=e=>/pin.it/gim.test(e||""),p=({link:e,mobileLink:t,origImageUrl:a,trackedLink:n,utmLink:r})=>t||r||n||e||a||"",E=(e,t)=>({deeplinkUri:{android:`pin/${e}/repin`,iOS:`repin/${e}`},mwebUri:{pathname:`/pin/${e}/repin/`,state:{trackingParams:t.state?t.state.trackingParams:""}}});function f(e){for(let t of i)if(e===t)return!1;return!0}function y(e){if(!e)return!1;let{id:t,videos:a}=e;if(t&&a?.id&&a.video_list){let{V_720P:e,V_HLSV4:t,V_HLSV3_MOBILE:n}=a.video_list;if(e&&C(e)||t&&C(t)||n&&C(n))return!0}let n=e.story_pin_data?.pages?.[0]?.blocks;if(n){for(let e of n)if("story_pin_video_block"===e.type&&e?.video)return!0}return!1}function C(e){return!!(e.thumbnail&&e.url&&e.width&&e.height)}function T(e){return e?/(?:v\/|V\/|be\/|(?:\?|&)v=|embed\/|shorts\/)([\w-]+)/.exec(e)?.[1]??null:null}function A({isVideo:e,link:t}){return!!e&&!!t&&!!/(youtu(|.)be)/.exec(t)&&!!T(t)}let h=e=>"button"in e&&1===e.button},324307:function(e,t,a){a.d(t,{ZP:()=>n});function n(e,t=80,a="â€¦",r=!1){let s;if(!e)return"";if(e.length<=t)return e;if(" "!==e[t-1]&&" "===e[t]||r)s=e.substring(0,t);else{let a=e.lastIndexOf(" ",t);s=e.substring(0,a)}return(s=s.replace(/[\- _,.<>:;+=*&@~\/\|!]*$/,""))+a}},914071:function(e,t,a){a.d(t,{Z:()=>r});var n=a(667294);function r(e,t){let a=(0,n.useRef)([]),[r,s]=(0,n.useState)(),[l,i]=(0,n.useReducer)(r??(()=>t),t),o=(0,n.useCallback)(t=>{r?i(t):(a.current.length||e().then(e=>{s(()=>e.default)}),a.current=[...a.current,t])},[e,r]);return(0,n.useEffect)(()=>{r&&(a.current.forEach(i),a.current=[])},[r]),[l,o]}},239728:function(e,t,a){a.d(t,{$f:()=>r,Cy:()=>o,DR:()=>n,Fm:()=>i,bR:()=>l,gJ:()=>s,lG:()=>d});let n=1,r=2,s=1e3,l=1e3,i=1e3,o=Object.freeze({DEFAULT:0,LOAD_START:1,LOADED_METADATA:2,LOADED_DATA:3,PLAYING:4,PAUSED:5,SEEKING:6,STALLING:7,FAILED:8,ENDED:9}),d=Object.freeze({MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4})},105433:function(e,t,a){a.d(t,{pb:()=>C,nf:()=>T,lV:()=>A});var n=a(667294),r=a(581722),s=a(441143),l=a.n(s),i=a(575108),o=a(729434),d=a(686319),u=a(791948),c=a(503246),_=a(991384);let m={feature_map:Object.freeze({})},g=(e,t)=>{let a={...(0,_.Z)(e,t),...t.reaction_counts?{reaction_counts:t.reaction_counts}:Object.freeze({}),...t.tags?{tags:t.tags}:Object.freeze({}),...t.tagged_users?{tagged_users:t.tagged_users}:Object.freeze({})};return(0,c.ZP)(e,a)?e:a},p=(e,t)=>{if(e=e||m,"FETCH_COMPLETE"===t.type){let{payload:{resource:a}}=t,{data:n}=t.payload.response.resource_response;if("AggregatedCommentFeedResource"===a||"AggregatedCommentReplyFeedResource"===a||"DidItCommentsResource"===a){let t=(n||[]).reduce((t,a)=>(t[a.id]=g(e[a.id],a),t),{});return{...e,...t}}if("UnifiedCommentsResource"===a&&n&&n.length>0){let t=n.filter(e=>"aggregatedcomment"===e.type).reduce((t,a)=>(t[a.id]=g(e[a.id],a),t),{});return{...e,...t}}if("UnifiedCommentsPreviewResource"===a&&n&&n.length>0){let t=n.map(e=>e.aggregated_comment).reduce((t,a)=>(a&&(t[a.id]=g(e[a.id],a)),t),{}),a=n.map(e=>e.creator_reply).reduce((t,a)=>(a&&a.id&&(t[a.id]=g(e[a.id],a)),t),{});return{...e,...t,...a}}if("AggregatedCommentFeaturesResource"===a&&n&&Object.keys(n).length>0)return{...e,feature_map:n}}else if("AGGREGATED_COMMENT_CREATED"===t.type){let{payload:{aggregatedComment:a}}=t;return a.id?{...e,[a.id]:a}:e}else if("AGGREGATED_COMMENT_DELETED"===t.type||"AGGREGATED_COMMENT_HIDDEN"===t.type){let{payload:{aggregatedCommentId:a}}=t,n={...e};return delete n[a],n}else if("AGGREGATED_COMMENT_HIDDEN_FOR_USER"===t.type){let{payload:{userId:a}}=t;return Object.fromEntries(Object.entries(e).filter(e=>e[1].user?.id!==a))}else if("AGGREGATED_COMMENT_UPDATED"===t.type){let{payload:{data:a}}=t;return{...e,[a.id]:g(e?.[a.id],a)}}else if("AGGREGATED_COMMENT_LIKE_TOGGLED"===t.type){let{payload:{data:a}}=t,n=e?.[a.id],r=n?.reaction_counts[1]||0,s={1:a.reaction_by_me?r+1:r-1},l={...n,reaction_by_me:a.reaction_by_me,reaction_counts:s};return{...e,[a.id]:l}}else if("AGGREGATED_COMMENT_HELPFUL_TOGGLED"===t.type){let{payload:{data:a}}=t,n=e?.[a.id],r=n?.helpful_count||0,s=a.marked_helpful_by_me?r+1:r-1,l={...n,marked_helpful_by_me:a.marked_helpful_by_me,helpful_count:s};return{...e,[a.id]:l}}else if("AGGREGATED_COMMENT_HIGHLIGHT_TOGGLED"===t.type){let{payload:{data:a}}=t,n={...e?.[a.aggregated_comment_id],highlighted_by_pin_owner:a.is_highlighted};return{...e,[a.aggregated_comment_id]:n}}else if("AGGREGATED_COMMENT_FEATURES_UPDATED"===t.type){let{payload:{data:{featureMap:a}}}=t;return{...e,feature_map:{...e?.feature_map,...a}}}else if("UPDATE_AGGREGATED_COMMENT_COMMENT_COUNT"===t.type){let{payload:{increment:a,id:n}}=t,r=e?.[n];if(!r)return e;let s={...r,comment_count:r.comment_count+a};return{...e,[n]:s}}else if("DELETE_COMMENT_MENTION"===t.type){let{payload:{aggregatedCommentId:a,tagged_users:n}}=t,r={...e?.[a],tagged_users:n};return{...e,[a]:r}}else if("GET_COMMENT_TRANSLATION"===t.type){let{payload:{aggregatedCommentId:a,translatedText:n}}=t,r={...e?.[a],translatedText:n};return{...e,[a]:r}}return e};var E=a(785893);let{Provider:f,get:y}=(0,o.Z)("AggregatedComments");function C({children:e}){let t=(0,r.v9)(({resources:e})=>e?.UnifiedCommentsResource),a=m;t&&Object.values(t).forEach(e=>{let t=e.data?.filter(e=>"aggregatedcomment"===e.type),n=t?.reduce((e,t)=>(e[t.id]=g(a[t.id],t),e),{});a={...a,...n}});let[s,l]=(0,n.useReducer)(p,a),i=e=>{l({type:"FETCH_COMPLETE",payload:e})};(0,u.Z8)("AggregatedCommentFeaturesResource",i),(0,u.my)("AggregatedCommentFeaturesResource",i),(0,u.Z8)("AggregatedCommentFeedResource",i),(0,u.my)("AggregatedCommentFeedResource",i),(0,u.Z8)("AggregatedCommentReplyFeedResource",i),(0,u.my)("AggregatedCommentReplyFeedResource",i),(0,u.Z8)("DidItCommentsResource",i),(0,u.my)("DidItCommentsResource",i),(0,u.Z8)("UnifiedCommentsPreviewResource",i),(0,u.my)("UnifiedCommentsPreviewResource",i),(0,u.Z8)("UnifiedCommentsResource",i),(0,u.my)("UnifiedCommentsResource",i);let o=(0,n.useMemo)(()=>({aggregatedComments:s,dispatch:l}),[s,l]);return(0,E.jsx)(f,{value:o,children:e})}function T(){let{dispatch:e}=y();return(0,n.useMemo)(()=>({aggregatedCommentCreated(t,a){e({type:"AGGREGATED_COMMENT_CREATED",payload:{parentId:t,aggregatedComment:a}})},aggregatedCommentDeleted:(t,a)=>{e({type:"AGGREGATED_COMMENT_DELETED",payload:{parentId:t,aggregatedCommentId:a}})},aggregatedCommentHidden:t=>{e({type:"AGGREGATED_COMMENT_HIDDEN",payload:{aggregatedCommentId:t}})},aggregatedCommentsHiddenForUser:t=>{e({type:"AGGREGATED_COMMENT_HIDDEN_FOR_USER",payload:{userId:t}})},flagAggregatedComment:async({isAggregatedComment:e=!0,commentId:t,reason:a,detailedReasons:n})=>{let r=e?`/v3/aggregated_comments/${t}/flag/`:`/v3/did_it/${t}/flag/`;return(0,d.Z)({url:r,method:"PUT",data:{commentId:t,reason:a,detailedReasons:n}})},deleteCommentMention:async t=>{let{resource_response:a}=await (0,d.Z)({url:`/v3/aggregated_comments/${t}/mentions/`,method:"DELETE",data:{fields:["aggregatedcomment.id","aggregatedcomment.tagged_users"]}}),n=a.data??{};e({type:"DELETE_COMMENT_MENTION",payload:{aggregatedCommentId:n.id,tagged_users:n.tagged_users}})},translateAggregatedComment:async t=>{try{let{resource_response:a}=await (0,d.Z)({url:`/v3/aggregated_comments/${t}/translate/`,method:"GET"}),n=a.data??"";e({type:"GET_COMMENT_TRANSLATION",payload:{aggregatedCommentId:t,translatedText:n}})}catch(a){e({type:"GET_COMMENT_TRANSLATION",payload:{aggregatedCommentId:t,translatedText:""}})}},toggleAggregatedCommentHelpful:({aggregatedCommentId:t,isMarkedHelpfulByMe:a,orbacSubjectId:n})=>{(0,d.Z)({url:`/v3/helpful/1/${t}/`,method:a?"DELETE":"POST",data:n?{orbac_subject_id:n}:{}}),e({type:"AGGREGATED_COMMENT_HELPFUL_TOGGLED",payload:{data:{id:t,marked_helpful_by_me:!a}}})},toggleAggregatedCommentHighlight:async({aggregatedCommentId:t,pinId:a,isHighlighted:n})=>{l()(t,"Could not find comment"),l()(a,"Could not find Pin"),await (0,d.Z)({url:"/v3/aggregated_comments/pin/highlight/",method:"PUT",data:{aggregated_comment:t,pin:a,highlight:!n}}),e({type:"AGGREGATED_COMMENT_HIGHLIGHT_TOGGLED",payload:{data:{aggregated_comment_id:t,pin_id:a,is_highlighted:!n}}})},toggleAggregatedCommentLike:({aggregatedCommentId:t,isLikedByMe:a,orbacSubjectId:n})=>{(0,d.Z)({url:`/v3/aggregated_comments/${t}/react/`,method:a?"DELETE":"POST",data:{reaction_type:1,...n?{orbac_subject_id:n}:{}}}),e({type:"AGGREGATED_COMMENT_LIKE_TOGGLED",payload:{data:{id:t,reaction_by_me:+!a}}})},updateAggregatedComment:async({commentId:t,force:a,orbacSubjectId:n,tags:r,text:s})=>{let{resource_response:l}=await i.Z.create("AggregatedCommentResource",{commentId:t,force:a,tags:r,text:s,...n?{orbacSubjectId:n}:{}}).callUpdate({showError:!1}),{tagged_users:o}=l.data??{};e({type:"AGGREGATED_COMMENT_UPDATED",payload:{data:{id:t,tagged_users:o.map(e=>({...e})),tags:JSON.parse(r),text:s}}})},updateAggregatedCommentFeatures:async({userId:t,featureMap:a,passcode:n,userConfirmPasscode:r})=>{let s={userId:t,featureMap:a,passcode:n,user_confirm_skip_passcode:r};void 0===r&&(s.user_confirm_skip_passcode=!1);let{resource_response:l}=await i.Z.create("AggregatedCommentFeaturesResource",s).callUpdate({showError:!1});e({type:"AGGREGATED_COMMENT_FEATURES_UPDATED",payload:{data:{featureMap:l.data??Object.freeze({})}}})},updateCommentCount:(t,a)=>{e({type:"UPDATE_AGGREGATED_COMMENT_COMMENT_COUNT",payload:{increment:a,id:t}})}}),[e])}function A(){let{aggregatedComments:e}=y();return e}},85442:function(e,t,a){a.d(t,{C:()=>r});var n=a(675973);function r(){let{checkExperiment:e}=(0,n.Z)();switch(e("entrypoints_collage_wasm").group){case"prefetch_all":default:return{preloadExtent:"Both"};case"prefetch_only_js":return{preloadExtent:"OnlyJS"};case"control":return{preloadExtent:"None"}}}},393107:function(e,t,a){a.d(t,{Z:()=>s});var n=a(821342),r=a(675973);let s=()=>{let{checkExperiment:e}=(0,r.Z)(),t=(0,n.Z)(),a=t.isAuth&&!t.isPartner;return (t=!1)=>{if(!a)return{anyEnabled:!1,followupFeatureEnabled:!1};let n=e("web_collage_creation",{dangerouslySkipActivation:t}),{anyEnabled:r}=n;return{anyEnabled:r,followupFeatureEnabled:n.group.startsWith("employee")||"enabled_followup_feature"===n.group}}}},314011:function(e,t,a){a.d(t,{C:()=>o,R:()=>i});var n=a(667294),r=a(729434),s=a(785893);let{Provider:l,get:i}=(0,r.Z)("MostRecentPin");function o({children:e}){let[t,a]=(0,n.useState)(),[r,i]=(0,n.useState)(),o=(0,n.useCallback)(e=>{i([e].concat((r?r.slice(0,10):[]).filter(t=>t!==e)))},[r]),d=(0,n.useMemo)(()=>({id:t,plpImageSignatures:r,setMostRecentPinId:a,setMostRecentPinImage:o}),[t,r,o]);return(0,s.jsx)(l,{value:d,children:e})}},502066:function(e,t,a){a.d(t,{G:()=>_,Kl:()=>m,vo:()=>c});var n=a(667294),r=a(729434),s=a(791948),l=a(914071),i=a(785893);let o=()=>a.e("83726").then(a.bind(a,3571)),{Provider:d,get:u}=(0,r.Z)("NativeEngagements");function c({children:e}){let[t,a]=(0,l.Z)(o,[]);(0,s.Z8)("NativeInteractionsResource",e=>{a({type:"FETCH_COMPLETE",payload:e})}),(0,s.my)("NativeInteractionsResource",e=>{a({type:"FETCH_MORE_COMPLETE",payload:e})});let r=(0,n.useMemo)(()=>({dispatch:a,nativeEngagements:t}),[a,t]);return(0,i.jsx)(d,{value:r,children:e})}function _(){let{dispatch:e}=u();return(0,n.useMemo)(()=>({nativeEngagementsHiddenForUser:t=>{e({type:"NATIVE_ENGAGEMENT_HIDDEN_FOR_USER",payload:{userId:t}})}}),[e])}function m(){let{nativeEngagements:e}=u();return e}},716751:function(e,t,a){a.d(t,{o:()=>i,p:()=>o});var n=a(667294),r=a(729434),s=a(785893);let{Provider:l,get:i}=(0,r.Z)("Session");function o({children:e}){let[t,a]=(0,n.useState)(void 0),r=(0,n.useCallback)(()=>a(void 0),[]),i=(0,n.useMemo)(()=>({unauthCommentPinId:t,setUnauthCommentPinId:a,removeUnauthCommentPinId:r}),[t,r]);return(0,s.jsx)(l,{value:i,children:e})}},469817:function(e,t,a){a.d(t,{Es:()=>d,HW:()=>o,er:()=>c,rQ:()=>u});var n=a(111330),r=a(753143),s=a(603316);let l=e=>e>=Date.now()-72e5,i=(e,t)=>{let a=[];if(e)for(let n of e)(!t||n.is_shared)&&l(n.ts)&&a.push(n);return a},o=()=>{let e=(0,r.M0)().getItem(n.uc)??[],t=i(e,!1),a=i(e,!0),s=t.map(e=>e.first_pin_image_signature),o=a.map(e=>e.first_pin_image_signature),d=(e=>{let t={};if(e)for(let a of e)a.is_shared&&l(a.ts)&&a.pin_id&&(t[a.pin_id]={inviteCode:a.pin_invite_code});return t})(e);return{extraPlpImages:s,plpImageRenderData:t,extraBlpImages:i((0,r.M0)().getItem(n.hI)??[],!0).map(e=>e.first_pin_image_signature),extraSharedImages:o,sharedPinData:d}},d=(e,t)=>{if(e.length!==t.length)return!1;for(let a=0;a<e.length;a+=1)if(e[a].id!==t[a].id)return!1;return!0},u=(e,t)=>e.map(e=>({1:e,2:(t[e]||[]).map(e=>({1:e,2:"pin"}))})),c=(e,t,a,n)=>{let r={};return e.forEach(e=>{let l=e.id,i=e.pins.length??0;r[l]=i,(0,s.QX)("webapp.log.nux.pin.picker.step.pin.number.of.pins",i,{sampleRate:1,addHostname:!0,tags:{appType:t,useCaseId:l,gender:a,age:n,use_case_display_name:e.display_name}}),(0,s.S0)("gauge.webapp.log.nux.pin.picker.step.pin.number.of.pins",i,{sampleRate:1,addHostname:!0,tags:{appType:t,useCaseId:l,gender:a,age:n,use_case_display_name:e.display_name}})}),r}},979922:function(e,t,a){a.d(t,{BT:()=>P,Du:()=>L,Fh:()=>O,HY:()=>I,HZ:()=>w,Jw:()=>y,Kp:()=>x,L7:()=>n,LT:()=>c,Lj:()=>F,Nw:()=>D,Q_:()=>b,Qc:()=>r,R5:()=>M,RA:()=>G,Tt:()=>N,UF:()=>d,UV:()=>l,VB:()=>T,W1:()=>s,Ws:()=>_,X5:()=>U,Yt:()=>S,ZW:()=>o,cK:()=>A,cy:()=>f,fA:()=>Z,gm:()=>C,h7:()=>R,k:()=>p,mE:()=>H,o4:()=>g,oL:()=>k,qf:()=>m,tr:()=>u,uD:()=>h,uO:()=>E,vF:()=>i,wJ:()=>v});let n=1,r=2,s="female",l="male",i="unspecified",o="en-US",d="US",u=3,c="Welcome",_="Gender",m="CountryLocale",g="InterestPicker",p="UseCase",E="PinPicker",f="LoadingStep",y="AppInstall",C="NUX_PIN_PICKER_STEP_STATUS",T="NUX_USE_CASE_STEP_STATUS",A={NUX_GENDER_STEP_NAME:_,NUX_COUNTRY_LOCALE_STEP_NAME:m,NUX_INTEREST_PICKER_STEP_NAME:g,NUX_USE_CASE_STEP_NAME:p,NUX_PIN_PICKER_STEP_NAME:E,NUX_LOADING_STEP_NAME:f,NUX_APP_INSTALL_STEP_NAME:y},h=2,R=3,b=6,D=112,G=160,M=60,U=1e3,N=2500,O=1900,v=2e3,w=3,S=1,P=3,I=3,L=5e3,k=250,Z=1e10,F=507641,H=300,x=200},76086:function(e,t,a){a.d(t,{W:()=>c,u:()=>u});var n=a(667294),r=a(729434),s=a(675973),l=a(979922);let i=(e,t)=>{let a=((e,t)=>{switch(t.type){case"SELECT_PIN":{let{pinData:a,pinId:n,useCaseId:r}=t.payload;return function({pinData:e,pinId:t,state:a,useCaseId:n}){let r=new Map(a.selectedUseCases),s=r.get(n)||{selectedPins:[],heroPin:null,backfillPins:[]},l={...e,pinId:t,selectedAt:Date.now()};return r.set(n,{...s,selectedPins:[...s.selectedPins,l]}),{...a,selectedUseCases:r}}({pinData:a,pinId:n,state:e,useCaseId:r})}case"DESELECT_PIN":{let{pinId:a,useCaseId:n}=t.payload;return function({pinId:e,state:t,useCaseId:a}){let n=new Map(t.selectedUseCases),r=n.get(a);return r&&n.set(a,{...r,selectedPins:r.selectedPins.filter(t=>t.pinId!==e)}),{...t,selectedUseCases:n}}({pinId:a,state:e,useCaseId:n})}case"SELECT_USE_CASE":{let{heroPin:a,useCaseId:n}=t.payload;return function({heroPin:e,state:t,useCaseId:a}){let n=new Map(t.selectedUseCases);return n.set(a,{selectedPins:[],heroPin:e,backfillPins:[]}),{...t,selectedUseCases:n}}({heroPin:a,state:e,useCaseId:n})}case"DESELECT_USE_CASE":{let{useCaseId:a}=t.payload;return function({state:e,useCaseId:t}){let a=new Map(e.selectedUseCases);return a.delete(t),{...e,selectedUseCases:a}}({state:e,useCaseId:a})}case"ADD_BACKFILL_PINS":{let{backfillPins:a,useCaseId:n}=t.payload;return function({backfillPins:e,state:t,useCaseId:a}){let n=new Map(t.selectedUseCases),r=n.get(a);return r&&n.set(a,{...r,backfillPins:[...e]}),{...t,selectedUseCases:n}}({backfillPins:a,state:e,useCaseId:n})}default:return e}})(e,t);return{...a,history:[...a.history||[],t]}};var o=a(785893);let{Provider:d,get:u}=(0,r.Z)("Nux");function c({children:e}){let[t,a]=(0,n.useState)([]),[r,u]=(0,n.useState)({}),[c,_]=(0,n.useState)(!1),{checkExperiment:m}=(0,s.Z)(),g=m("ap_dweb_nux_revamp_auto_pin_select",{dangerouslySkipActivation:!0}).anyEnabled,p={selectedUseCases:new Map,history:[]},[E,f]=(0,n.useReducer)(i,p),y=(0,n.useCallback)(()=>Array.from(E.selectedUseCases.values()).reduce((e,t)=>e+t.selectedPins.length,0),[E.selectedUseCases]),C=(0,n.useCallback)(e=>Array.from(E.selectedUseCases.entries()).reduce((t,[a,n])=>e&&a===e?t:t.concat(n.selectedPins),[]),[E.selectedUseCases]),T=(0,n.useCallback)(e=>C(e).map(e=>({url:e.imageMediumUrl,height:e.height,width:e.width})),[C]),A=(0,n.useCallback)(()=>{let e=[];for(let[t,a]of E.selectedUseCases){let n=a.selectedPins.map(e=>({1:e.pinId,2:"pin"}));e.push({1:t,2:n})}return e},[E.selectedUseCases]),h=(0,n.useCallback)(()=>E.selectedUseCases&&y()>=l.HZ,[y,E.selectedUseCases]),R=(0,n.useCallback)(()=>g?E.selectedUseCases.size>=l.BT:E.selectedUseCases.size>=l.Yt,[E.selectedUseCases,g]),b=(0,n.useMemo)(()=>({checkHasMetMinimumPinSelectionRequirement:h,checkHasMetMinimumUseCaseSelectionRequirement:R,getNuxSignals:A,getNumSelectedPins:y,getSelectedPinImageData:T,nuxSelectionsDispatch:f,nuxSelectionsState:E,selectedPins:r,selectedUseCases:t,setSelectedPins:u,setSelectedUseCases:a,setShouldUseNewReducerState:_,shouldUseNewReducerState:c}),[h,R,A,y,T,f,E,r,t,u,a,_,c]);return(0,o.jsx)(d,{value:b,children:e})}},261228:function(e,t,a){a.d(t,{H5:()=>o,Nq:()=>i,Q_:()=>d,bJ:()=>u});var n=a(575108),r=a(657043),s=a(600861),l=a(979922);function i(e){let{updateUserData:t}=e,a={},i=null;if(t.gender&&[l.W1,l.UV].includes(t.gender)?a.gender=t.gender:t.custom_gender&&(a.custom_gender=t.custom_gender,a.customGender=t.custom_gender,a.gender=l.vF),t.age?a.age=t.age:t.birthdate&&(a.birthdate=t.birthdate),t.locale&&(a.locale=t.locale),t.country&&(a.country=t.country),t.business_vertical&&(a.businessVertical=t.business_vertical),t.business_vertical_other&&(a.businessVerticalOther=t.business_vertical_other),t.number_employees&&(a.numberEmployees=t.number_employees),t.first_name&&(a.firstName=t.first_name),t.last_name&&(a.lastName=t.last_name),t.full_name&&(a.fullName=t.full_name),t.parent_email&&(a.parentEmail=t.parent_email),t.website_url&&(a.websiteUrl=t.website_url),t.listed_website_url&&(a.listedWebsiteUrl=t.listed_website_url),void 0!==t.allow_analytic_cookies&&(a.allow_analytic_cookies=t.allow_analytic_cookies),void 0!==t.allow_analytic_cookies&&(a.allow_marketing_cookies=t.allow_marketing_cookies),void 0!==t.allow_analytic_cookies&&(a.allow_personalization_cookies=t.allow_personalization_cookies),t.advertising_intent||t.business_name||t.account_type||t.business_goals||t.selected_ecommerce_platforms||t.enable_profile_message||t.enable_profile_address){let{account_type:e,advertising_intent:a,business_name:n,business_goals:r,enable_profile_message:s,enable_profile_address:l,selected_ecommerce_platforms:o}=t;i={...a?{advertising_intent:a}:{},...e?{account_type:e}:{},...n?{business_name:n}:{},...r?{business_goals:r}:{},...s?{enable_profile_message:s}:{},...l?{enable_profile_address:l}:{},...o?{selected_ecommerce_platforms:o}:{}}}i&&(a.partner=i,i.business_name&&(a.firstName=i.business_name));let o=n.Z.create("UserSettingsResource",{...t,surface_tag:s.i.NUX}).callUpdate();return async function(e){try{let t=await o;return e({type:"UPDATE_USER_SET",payload:a}),t}catch(e){return Promise.reject(Error((0,r.Z)(e,"message")))}}}function o(e){return{type:"UPDATE_USER_FIRST_HOME_FEED_REQUEST_AFTER_NUX",payload:e}}function d(e,t){return()=>{n.Z.create("UserStateResource",{state:e,value:t}).callCreate()}}function u(e,t=""){return()=>n.Z.create("UpdateFollowedInterestsResource",{referrer:t,updated_interest_follows:e}).callUpdate()}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/84536-b054f9976961a5b7.mjs.map